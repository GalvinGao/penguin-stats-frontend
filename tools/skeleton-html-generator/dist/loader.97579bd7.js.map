{"version":3,"sources":["js/loader.js"],"names":["setTimeout","document","getElementById","style","opacity","_i18n","languageWithRegion","nav","i","language","len","window","navigator","browserLanguagePropertyKeys","shortLanguage","Array","isArray","languages","length","localStorage","settings","getItem","data","JSON","parse","e","replace","split","fill","key","content","innerHTML","render","querySelector","textContent","Date","getFullYear","toString","m","titleEl","getTitle","shifted","titles","shift","push","setInterval","ctr","Math","random","width","Object","keyMap","entries","keyMessage","keyElement","console","error"],"mappings":";AAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,CAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,GAAC,WAECA,WAAW,WACTC,SAASC,eAAe,wBAAwBC,MAAMC,QAAU,GAC/D,KAECC,IAAAA,EAAQ,CACVC,mBAAsB,WAChBC,IAEFC,EACAC,EACAC,EAJEH,EAAMI,OAAOC,UACfC,EAA8B,CAAC,WAAY,kBAAmB,iBAAkB,gBAIhFC,EAAgB,KAGdC,GAAAA,MAAMC,QAAQT,EAAIU,WACfT,IAAAA,EAAI,EAAGA,EAAID,EAAIU,UAAUC,OAAQV,IAMhCC,GAJJC,GADAD,EAAWF,EAAIU,UAAUT,IACVU,QACVJ,GAAiBJ,IACpBI,EAAgBL,GAEdA,GAAYC,EAAI,EACXD,OAAAA,EAMRD,IAAAA,EAAI,EAAGA,EAAIK,EAA4BK,OAAQV,IAG9CC,GAAY,OAFhBA,EAAWF,EAAIM,EAA4BL,OAG3CE,EAAMD,EAASS,QACVJ,GAAiBJ,IACpBI,EAAgBL,GAEdA,GAAYC,EAAM,GACbD,OAAAA,EAIJK,OAAAA,GAETL,SAAY,WACNU,GAAAA,aAAc,CACVC,IAAAA,EAAWD,aAAaE,QAAQ,0BAClCD,GAAAA,EACE,IAEKE,OADMC,KAAKC,MAAMJ,GACZA,SAASX,SACrB,MAAOgB,GAEA,MAAA,MAIPhB,IAAAA,EAAW,KAAKH,qBAAqBoB,QAAQ,IAAK,KACpD,IAACjB,EAAU,MAAO,KAChBQ,IAAAA,EAAYR,EAASkB,MAAM,KAC7BV,OAAqB,IAArBA,EAAUC,OACLT,EACuB,IAArBQ,EAAUC,OACZD,EAAU,GAGV,MAGXK,KAAM,CACE,GAAA,CACM,OAAA,CAAC,8BAA+B,WAAY,QAAS,SACnD,SAAA,iBACF,OAAA,mBAEN,GAAA,CACM,OAAA,CAAC,oDAAqD,6CACpD,SAAA,oCACF,OAAA,6BAEN,GAAA,CACM,OAAA,CAAC,YACC,SAAA,uCACF,OAAA,0BAEN,GAAA,CACM,OAAA,CAAC,UACC,SAAA,sCACF,OAAA,2BAGdM,KAAMC,SAAAA,EAAKC,GACT7B,SAASC,eAAe2B,GAAKE,UAAYD,GAE3CE,OAAU,WACR/B,SAASgC,cAAc,2BAA2BC,aAAc,IAAIC,MAAOC,cAAcC,WACnF5B,IAAAA,EAAW,KAAKA,WAChB6B,EAAI,KAAKhB,KAAKb,GACd8B,EAAUtC,SAASgC,cAAc,oBAE9BO,SAAAA,IACDC,IAAAA,EAAUH,EAAEI,OAAOC,QAElBF,OADPH,EAAEI,OAAOE,KAAKH,GACPA,EAGTF,EAAQL,YAAcM,IAEtBK,YAAY,WACVN,EAAQpC,MAAMC,QAAU,EACxBJ,WAAW,WACTuC,EAAQL,YAAcM,IACtBD,EAAQpC,MAAMC,QAAU,GACvB,MACF,KAEC0C,IAAAA,EAAM,EACVD,YAAY,WACVC,GAAO,EAAoB,EAAhBC,KAAKC,SAChB/C,SAASgC,cAAc,8BAA8B9B,MAAM8C,MAAQH,EAAM,KACxE,KAOoCI,IALjCC,IAKiCD,EAAAA,EAAAA,EAAAA,OAAOE,QAL/B,CACD,SAAA,qBACF,OAAA,4BAGmD,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAnDC,EAAmD,EAAA,GAAvCC,EAAuC,EAAA,GAC7DrD,SAASC,eAAeoD,GAAYvB,UAAYO,EAAEe,MAKpD,IACFhD,EAAM2B,SACN,MAAOP,GACP8B,QAAQC,MAAM/B,IAzIjB","file":"loader.97579bd7.js","sourceRoot":"../src","sourcesContent":["(function () {\n  // gradient timeout\n  setTimeout(function () {\n    document.getElementById(\"p-loader--gradientel\").style.opacity = 1\n  }, 750)\n\n  let _i18n = {\n    languageWithRegion () {\n      let nav = window.navigator,\n        browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'],\n        i,\n        language,\n        len,\n        shortLanguage = null;\n\n      // support for HTML 5.1 \"navigator.languages\"\n      if (Array.isArray(nav.languages)) {\n        for (i = 0; i < nav.languages.length; i++) {\n          language = nav.languages[i];\n          len = language.length;\n          if (!shortLanguage && len) {\n            shortLanguage = language;\n          }\n          if (language && len>2) {\n            return language;\n          }\n        }\n      }\n\n      // support for other well known properties in browsers\n      for (i = 0; i < browserLanguagePropertyKeys.length; i++) {\n        language = nav[browserLanguagePropertyKeys[i]];\n        //skip this loop iteration if property is null/undefined.  IE11 fix.\n        if (language == null) { continue; }\n        len = language.length;\n        if (!shortLanguage && len) {\n          shortLanguage = language;\n        }\n        if (language && len > 2) {\n          return language;\n        }\n      }\n\n      return shortLanguage;\n    },\n    language () {\n      if (localStorage) {\n        const settings = localStorage.getItem(\"penguin-stats-settings\")\n        if (settings) {\n          try {\n            const data = JSON.parse(settings);\n            return data.settings.language\n          } catch (e) {\n            // fallback\n            return \"en\"\n          }\n        }\n      }\n      const language = this.languageWithRegion().replace(\"_\", \"-\");\n      if (!language) return \"en\"; // use default\n      const languages = language.split(\"-\");\n      if (languages.length === 1) {\n        return language\n      } else if (languages.length === 2) {\n        return languages[0]\n      } else {\n        // probably malformed...\n        return \"en\"\n      }\n    },\n    data: {\n      \"zh\": {\n        \"titles\": [\"正在尝试与 Rhodes Island™ 建立神经连接\", \"正在释放神经递质\", \"少女祈祷中\", \"资源装载中\"],\n        \"subtitle\": \"首次加载可能较慢，请耐心等待\",\n        \"vendor\": \"&copy; 企鹅物流数据统计\"\n      },\n      \"en\": {\n        \"titles\": [\"Connecting to the neural network of Rhodes Island\", \"Submitting feedback to the neural network\"],\n        \"subtitle\": \"Initialization may take some time\",\n        \"vendor\": \"&copy; Penguin Statistics\"\n      },\n      \"ja\": {\n        \"titles\": [\"読み込み中...\"],\n        \"subtitle\": \"初めての読み込みは動作が遅くなる可能性があります<br>少々お待ち下さい\",\n        \"vendor\": \"&copy; ペンギン急便データ統計処理部門\"\n      },\n      \"ko\": {\n        \"titles\": [\"로딩중...\"],\n        \"subtitle\": \"초기 설정에 시간이 좀 걸릴 수 있으니, 기다려 주시기 바랍니다\",\n        \"vendor\": \"&copy; 펭귄 물류 데이터 분석 부서\"\n      },\n    },\n    fill (key, content) {\n      document.getElementById(key).innerHTML = content;\n    },\n    render () {\n      document.querySelector(\"#p-loader__footer--year\").textContent = new Date().getFullYear().toString();\n      const language = this.language();\n      const m = this.data[language]\n      const titleEl = document.querySelector(\".p-loader__title\")\n\n      function getTitle() {\n        const shifted = m.titles.shift()\n        m.titles.push(shifted)\n        return shifted\n      }\n\n      titleEl.textContent = getTitle()\n\n      setInterval(function () {\n        titleEl.style.opacity = 0\n        setTimeout(function () {\n          titleEl.textContent = getTitle()\n          titleEl.style.opacity = 1\n        }, 500)\n      }, 4000)\n\n      let ctr = 0\n      setInterval(function () {\n        ctr += 2 + Math.random() * 4\n        document.querySelector(\".p-loader__loader-progress\").style.width = ctr + \"%\"\n      }, 500)\n\n      const keyMap = {\n        \"subtitle\": \"p-loader__subtitle\",\n        \"vendor\": \"p-loader__footer-vendor\"\n      }\n\n      for (const [keyMessage, keyElement] of Object.entries(keyMap)) {\n        document.getElementById(keyElement).innerHTML = m[keyMessage]\n      }\n    }\n  };\n\n  try {\n    _i18n.render()\n  } catch (e) {\n    console.error(e)\n  }\n\n}())\n"]}